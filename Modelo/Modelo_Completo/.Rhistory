df = left_join(pib,tarif)
View(df)
tarif = tarif %>%
rename(Country.Name = Country)
df = left_join(pib,tarif)
df = left_join(pib,tarif, by=c("Country.Name", "Year", "")) %>%
filter(Year > 1996)
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996)
tarif[9775]
tarif[9775,]
tarif %>% filter(Year == 1997 | Country.Name == "Argentina")
tarif %>% filter(Year == 1997 & Country.Name == "Argentina")
pib %>% filter(Year == 1997 & Country.Code == "ARG")
colnames(distance)
distance = distance %>%
select(Country.Code, contig, distw)
colnames(distance)
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance)
View(df)
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code")
View(df)
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
left_join(Notif)
View(df)
df %>% select(12:) %>%  unique()
df %>% select([12:]) %>%  unique()
df %>% select(df[12:]) %>%  unique()
df %>% select(df[,12:]) %>%  unique()
df %>% select(Animal.health:) %>%  unique()
df %>% select(c(12:)) %>%  unique()
df %>% select(c(,12:)) %>%  unique()
df %>% select(c(,12:))
df %>% select(c(,12))
df %>% select(c(,12:20))
df %>% select(c(,12)) %>%  unique()
View(Notif)
Notif$Commodity.Code %>%
str_extract(pattern = "\d{2}")
Notif$Commodity.Code %>%
str_extract(reeg = "[\d{2}]")
Notif$Commodity.Code %>%
str_extract(reeg = "(\d{2})")
Notif$Commodity.Code %>%
str_extract(reeg = "(\d{2})")
Notif$Commodity.Code %>%
str_extract(reeg = "(\d{2})")
Notif$Commodity.Code %>%
str_extract(reeg = "(\d{2})")
Notif$Commodity.Code %>%
str_extract(reeg = "(\d{2})")
Notif$Commodity.Code %>%
str_extract(reeg = "(\d{2})")
Notif$Commodity.Code %>%
str_extract(reeg = "(d{2})")
Notif$Commodity.Code %>%
str_extract(regex = "(d{2})")
Notif$Commodity.Code %>%
str_extract(regex = "(\d{2})")
Notif$Commodity.Code %>%
str() %>%
str_extract(regex = "(\d{2})")
Notif$Commodity.Code %>%
str() %>%
str_extract(regex = "\d{2}")
Notif$Commodity.Code %>%
str() %>%
str_extract(regex = \d{2})
Notif$Commodity.Code %>%
str() %>%
str_extract(regex = "(\d{2})")
Notif$Commodity.Code %>%
str() %>%
str_extract("(\d{2})")
Notif$Commodity.Code %>%
str() %>%
str_extract("\\d{2}")
Notif$Commodity.Code %>%
str() %>%
str_extract("\(\d{2})")
Notif$Commodity.Code %>%
str() %>%
str_extract("\\d{2}")
str(Notif$Commodity.Code) %>%
str_extract("\\d{2}")
str(Notif$Commodity.Code) %>%
toString() %>%
str_extract("\\d{2}")
str(Notif$Commodity.Code) %>%
sprintf("\\d{2}")
str(Notif$Commodity.Code) %>%
sprintf("%d{2}")
str(Notif$Commodity.Code) %>%
sprintf("%d%d")
Notif$Commodity.Code %>%
sprintf("%d%d")
Notif$Commodity.Code %>%
sprintf("%d %d")
Notif$Commodity.Code[,0]
Notif$Commodity.Code %>% round(digits=2)
Notif$Commodity.Code %>% substr(0,2)
Notif$Commodity.Code %>%
substr(0,2) %>%
numeric()
Notif$Commodity.Code %>%
substr(0,2) %>%
as.numeric()
Notif$Commodity.Code = Notif$Commodity.Code %>%
substr(0,2) %>%
as.numeric()
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
left_join(Notif)
View(Notif)
Notif = Notif %>%
filter(Commodity.Code < 15)
Notif = read.csv("../Notificacoes/Objetivos_Agrupados.csv")
Notif$Commodity.Code = Notif$Commodity.Code %>%
substr(0,2) %>%
as.numeric()
Notif = Notif %>%
filter(Commodity.Code < 16)
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
left_join(Notif, by=c("Year", "Country.Code", "Country.Name"))
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
inner_join(Notif, by=c("Year", "Country.Code", "Country.Name")
)
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
right_join(Notif, by=c("Year", "Country.Code", "Country.Name"))
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
full_join(Notif, by=c("Year", "Country.Code", "Country.Name"))
View(Notif)
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
right_join(Notif, by=c("Year", "Country.Code", "Commodity.Code"))
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
left_join(Notif, by=c("Year", "Country.Code", "Commodity.Code"))
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
right_join(Notif, by=c("Year", "Country.Code", "Commodity.Code"))
colnames(df)
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
right_join(Notif, by=c("Year", "Country.Code", "Commodity.Code")) %>%
fill(c("Country.Name", "Country.Code", "PIB_.1000_US..",
"Simple.Average", "Weighted.Average","Imports.Value.in.1000.USD",
"contig","distw"))
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
right_join(Notif, by=c("Year", "Country.Code", "Commodity.Code")) %>%
fill(c("Country.Name", "Country.Code", "PIB_.1000_US..",
"Simple.Average", "Weighted.Average","Imports.Value.in.1000.USD",
"contig","distw")) %>%
select(c(-"X.x", -"X.y"))
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
right_join(Notif, by=c("Year", "Country.Code", "Commodity.Code")) %>%
fill(c("Country.Name", "Country.Code", "PIB_.1000_US..",
"Simple.Average", "Weighted.Average","Imports.Value.in.1000.USD",
"contig","distw")) %>%
select(c(-"X.x", -"X.y", -"Simple.Average")) %>%
transmute(ln_PIB = log(PIB_.1000_US..,),
ln_Tariff = log(Weighted.Average),
ln_Export = log(Imports.Value.in.1000.USD))
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
right_join(Notif, by=c("Year", "Country.Code", "Commodity.Code")) %>%
fill(c("Country.Name", "Country.Code", "PIB_.1000_US..",
"Simple.Average", "Weighted.Average","Imports.Value.in.1000.USD",
"contig","distw")) %>%
select(c(-"X.x", -"X.y", -"Simple.Average")) %>%
mutatete(ln_PIB = log(PIB_.1000_US..,),
ln_Tariff = log(Weighted.Average),
ln_Export = log(Imports.Value.in.1000.USD)) %>%
select(c(-"PIB_.1000_US..",-"Weighted.Average",
-"Imports.Value.in.1000.USD"))
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
right_join(Notif, by=c("Year", "Country.Code", "Commodity.Code")) %>%
fill(c("Country.Name", "Country.Code", "PIB_.1000_US..",
"Simple.Average", "Weighted.Average","Imports.Value.in.1000.USD",
"contig","distw")) %>%
select(c(-"X.x", -"X.y", -"Simple.Average")) %>%
mutate(ln_PIB = log(PIB_.1000_US..,),
ln_Tariff = log(1 + Weighted.Average),
ln_Export = log(Imports.Value.in.1000.USD)) %>%
select(c(-"PIB_.1000_US..",-"Weighted.Average",
-"Imports.Value.in.1000.USD"))
write.csv(df, "Modelo_Proprio.csv")
setwd("C:/Users/Thiago/Desktop/Google Drive/ITP/Modelo")
library(gravity)
df = read.csv("Modelo_Completo/Modelo_Proprio.csv")
library(gravity)
df$Origin = "BRA"
View(df)
View(df)
modelo = ppml(
dependent_variable = "ln_Export",
distance = "distw",
additional_regressors = c(
"Animal.health",
"Consumer.information",
"Cost.saving",
"Food.safety",
"Harmonization",
"Labelling",
"Lower.barriers.to.trade",
"National.security.requirements",
"Not.specified",
"Other",
"Plant.protection",
"Prevention.of.deceptive.practices.and.consumer.protection",
"Protect.humans.from.animal.plant.pest.or.disease",
"Protect.territory.from.other.damage.from.pests",
"Protection.of.Human.health.or.Safety",
"Protection.of.animal.or.plant.life.or.health",
"Protection.of.the.environment",
"Quality.requirements",
"ln_PIB",
"ln_Tariff"
),
code_origin = "Origin",
code_destination = "Country.Code",
data = df
)
df %>%  filter( <0 )
df %>%  filter(c("ln_PIB", "ln_Tariff", "ln_Export") <0 )
df %>%  filter(ln_PIB < 0 | ln_Tariff < 0 | ln_Export < 0)
setwd("C:/Users/Thiago/Desktop/Google Drive/ITP/Modelo/Modelo_Completo")
library(tidyverse)
distance =  read.csv("../Distanciamento/Distanciamento_Especificado.csv")
pib = read.csv("../PIB_Nominal/PIB_especificado.csv")
Notif = read.csv("../Notificacoes/Objetivos_Agrupados.csv")
tarif = read.csv("../Tarifas/Tarifas_Especificadas.csv")
library(tidyverse)
distance =  read.csv("../Distanciamento/Distanciamento_Especificado.csv")
pib = read.csv("../PIB_Nominal/PIB_especificado.csv")
Notif = read.csv("../Notificacoes/Objetivos_Agrupados.csv")
tarif = read.csv("../Tarifas/Tarifas_Especificadas.csv")
View(pib)
pib %>% filter(c(,5) < 0)
pib %>% filter(c(5,) < 0)
pib %>% filter(c(,5) < 0)
pib %>% filter(PIB_.1000_US.. < 0)
tarif = tarif %>%
rename(Country.Name = Country)
distance = distance %>%
select(Country.Code, contig, distw)
Notif$Commodity.Code = Notif$Commodity.Code %>%
substr(0,2) %>%
as.numeric()
Notif = Notif %>%
filter(Commodity.Code < 16)
pib %>%
mutate(PIB_.1000_US.. = PIB_.1000_US.. * 1000)
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
right_join(Notif, by=c("Year", "Country.Code", "Commodity.Code")) %>%
fill(c("Country.Name", "Country.Code", "PIB_.1000_US..",
"Simple.Average", "Weighted.Average","Imports.Value.in.1000.USD",
"contig","distw")) %>%
select(c(-"X.x", -"X.y", -"Simple.Average")) %>%
mutate(ln_PIB = log(PIB_.1000_US..,),
ln_Tariff = log(1 + Weighted.Average),
ln_Export = log(Imports.Value.in.1000.USD)) %>%
select(c(-"PIB_.1000_US..",-"Weighted.Average",
-"Imports.Value.in.1000.USD"))
write.csv(df, "Modelo_Proprio.csv")
setwd("C:/Users/Thiago/Desktop/Google Drive/ITP/Modelo")
library(gravity)
df = read.csv("Modelo_Completo/Modelo_Proprio.csv")
df$Origin = "BRA"
modelo = ppml(
dependent_variable = "ln_Export",
distance = "distw",
additional_regressors = c(
"Animal.health",
"Consumer.information",
"Cost.saving",
"Food.safety",
"Harmonization",
"Labelling",
"Lower.barriers.to.trade",
"National.security.requirements",
"Not.specified",
"Other",
"Plant.protection",
"Prevention.of.deceptive.practices.and.consumer.protection",
"Protect.humans.from.animal.plant.pest.or.disease",
"Protect.territory.from.other.damage.from.pests",
"Protection.of.Human.health.or.Safety",
"Protection.of.animal.or.plant.life.or.health",
"Protection.of.the.environment",
"Quality.requirements",
"ln_PIB",
"ln_Tariff"
),
code_origin = "Origin",
code_destination = "Country.Code",
data = df
)
df %>%  filter(ln_PIB < 0 | ln_Tariff < 0 | ln_Export < 0  )
setwd("C:/Users/Thiago/Desktop/Google Drive/ITP/Modelo/Modelo_Completo")
library(tidyverse)
distance =  read.csv("../Distanciamento/Distanciamento_Especificado.csv")
pib = read.csv("../PIB_Nominal/PIB_especificado.csv")
Notif = read.csv("../Notificacoes/Objetivos_Agrupados.csv")
tarif = read.csv("../Tarifas/Tarifas_Especificadas.csv")
tarif = tarif %>%
rename(Country.Name = Country)
distance = distance %>%
select(Country.Code, contig, distw)
Notif$Commodity.Code = Notif$Commodity.Code %>%
substr(0,2) %>%
as.numeric()
Notif = Notif %>%
filter(Commodity.Code < 16)
pib = pib %>%
mutate(PIB_.1000_US.. = PIB_.1000_US.. * 1000)
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
right_join(Notif, by=c("Year", "Country.Code", "Commodity.Code")) %>%
fill(c("Country.Name", "Country.Code", "PIB_.1000_US..",
"Simple.Average", "Weighted.Average","Imports.Value.in.1000.USD",
"contig","distw")) %>%
select(c(-"X.x", -"X.y", -"Simple.Average")) %>%
mutate(ln_PIB = log(PIB_.1000_US..,),
ln_Tariff = log(1 + Weighted.Average),
ln_Export = log(Imports.Value.in.1000.USD)) %>%
select(c(-"PIB_.1000_US..",-"Weighted.Average",
-"Imports.Value.in.1000.USD"))
write.csv(df, "Modelo_Proprio.csv")
library(gravity)
df = read.csv("Modelo_Completo/Modelo_Proprio.csv")
df$Origin = "BRA"
modelo = ppml(
dependent_variable = "ln_Export",
distance = "distw",
additional_regressors = c(
"Animal.health",
"Consumer.information",
"Cost.saving",
"Food.safety",
"Harmonization",
"Labelling",
"Lower.barriers.to.trade",
"National.security.requirements",
"Not.specified",
"Other",
"Plant.protection",
"Prevention.of.deceptive.practices.and.consumer.protection",
"Protect.humans.from.animal.plant.pest.or.disease",
"Protect.territory.from.other.damage.from.pests",
"Protection.of.Human.health.or.Safety",
"Protection.of.animal.or.plant.life.or.health",
"Protection.of.the.environment",
"Quality.requirements",
"ln_PIB",
"ln_Tariff"
),
code_origin = "Origin",
code_destination = "Country.Code",
data = df
)
df = read.csv("Modelo_Completo/Modelo_Proprio.csv")
setwd("C:/Users/Thiago/Desktop/Google Drive/ITP/Modelo")
library(gravity)
df = read.csv("Modelo_Completo/Modelo_Proprio.csv")
df$Origin = "BRA"
modelo = ppml(
dependent_variable = "ln_Export",
distance = "distw",
additional_regressors = c(
"Animal.health",
"Consumer.information",
"Cost.saving",
"Food.safety",
"Harmonization",
"Labelling",
"Lower.barriers.to.trade",
"National.security.requirements",
"Not.specified",
"Other",
"Plant.protection",
"Prevention.of.deceptive.practices.and.consumer.protection",
"Protect.humans.from.animal.plant.pest.or.disease",
"Protect.territory.from.other.damage.from.pests",
"Protection.of.Human.health.or.Safety",
"Protection.of.animal.or.plant.life.or.health",
"Protection.of.the.environment",
"Quality.requirements",
"ln_PIB",
"ln_Tariff"
),
code_origin = "Origin",
code_destination = "Country.Code",
data = df
)
df %>%  filter(ln_PIB < 0 | ln_Tariff < 0 | ln_Export < 0  )
setwd("C:/Users/Thiago/Desktop/Google Drive/ITP/Modelo/Modelo_Completo")
setwd("C:/Users/Thiago/Desktop/Google Drive/ITP/Modelo/Modelo_Completo")
library(tidyverse)
distance =  read.csv("../Distanciamento/Distanciamento_Especificado.csv")
pib = read.csv("../PIB_Nominal/PIB_especificado.csv")
Notif = read.csv("../Notificacoes/Objetivos_Agrupados.csv")
tarif = read.csv("../Tarifas/Tarifas_Especificadas.csv")
tarif = tarif %>%
rename(Country.Name = Country)
distance = distance %>%
select(Country.Code, contig, distw)
Notif$Commodity.Code = Notif$Commodity.Code %>%
substr(0,2) %>%
as.numeric()
Notif = Notif %>%
filter(Commodity.Code < 16)
pib = pib %>%
mutate(PIB_.1000_US.. = PIB_.1000_US.. * 1000)
View(pib)
View(pib)
pib %>% filter(PIB_.1000_US.. < 0)
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
right_join(Notif, by=c("Year", "Country.Code", "Commodity.Code")) %>%
fill(c("Country.Name", "Country.Code", "PIB_.1000_US..",
"Simple.Average", "Weighted.Average","Imports.Value.in.1000.USD",
"contig","distw")) %>%
select(c(-"X.x", -"X.y", -"Simple.Average")) %>%
mutate(ln_PIB = log(PIB_.1000_US..,),
ln_Tariff = log(1 + Weighted.Average),
ln_Export = log(Imports.Value.in.1000.USD)) %>%
select(c(-"PIB_.1000_US..",-"Weighted.Average",
-"Imports.Value.in.1000.USD"))
df %>% filter(ln_PIB < 0)
colnames(tarif)
library(tidyverse)
distance =  read.csv("../Distanciamento/Distanciamento_Especificado.csv")
pib = read.csv("../PIB_Nominal/PIB_especificado.csv")
Notif = read.csv("../Notificacoes/Objetivos_Agrupados.csv")
tarif = read.csv("../Tarifas/Tarifas_Especificadas.csv")
tarif = tarif %>%
rename(Country.Name = Country) %>%
mutate(Imports.Value.in.1000.USD = Imports.Value.in.1000.USD * 1000)
distance = distance %>%
select(Country.Code, contig, distw)
Notif$Commodity.Code = Notif$Commodity.Code %>%
substr(0,2) %>%
as.numeric()
Notif = Notif %>%
filter(Commodity.Code < 16)
pib = pib %>%
mutate(PIB_.1000_US.. = PIB_.1000_US.. * 1000)
df = left_join(pib,tarif, by=c("Country.Name", "Year")) %>%
filter(Year > 1996) %>%
left_join(distance, by="Country.Code") %>%
drop_na() %>%
right_join(Notif, by=c("Year", "Country.Code", "Commodity.Code")) %>%
fill(c("Country.Name", "Country.Code", "PIB_.1000_US..",
"Simple.Average", "Weighted.Average","Imports.Value.in.1000.USD",
"contig","distw")) %>%
select(c(-"X.x", -"X.y", -"Simple.Average")) %>%
mutate(ln_PIB = log(PIB_.1000_US..,),
ln_Tariff = log(1 + Weighted.Average),
ln_Export = log(Imports.Value.in.1000.USD)) %>%
select(c(-"PIB_.1000_US..",-"Weighted.Average",
-"Imports.Value.in.1000.USD"))
write.csv(df, "Modelo_Proprio.csv")
df %>% filter(ln_PIB < 0 | ln_Export)
df %>% filter(ln_PIB < 0 | ln_Export < 0)
